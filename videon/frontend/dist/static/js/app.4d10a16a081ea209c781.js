webpackJsonp([1],{"4KRv":function(t,e){},EPz1:function(t,e){},"Hk+A":function(t,e){},Kicj:function(t,e){},MaJi:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),a=r("mtWM"),s=r.n(a),i=Object({NODE_ENV:"production"}).API_URL||"http://localhost:5000",o=function(){return s.a.create({baseURL:i,withCredentials:!0})},c=function(t){o().get("/currentUser/").then(function(e){e.data?document.getElementById("navbar").classList.remove("hidden"):(document.getElementById("navbar").classList.add("hidden"),t.$router.push("/login"))}).catch(function(t){t.response&&console.log(t.response.data)})},d=function(t){o().get("/currentUser/").then(function(e){e.data?(document.getElementById("navbar").classList.remove("hidden"),t.$router.push("/")):document.getElementById("navbar").classList.add("hidden")}).catch(function(t){t.response&&console.log(t.response.data)})},l=function(t){o().get("logout").then(function(t){window.location.href="/login"}).catch(function(t){t.response&&console.log(t.response.data)})},u={name:"App",data:function(){return{user:{username:"",isCreator:""}}},methods:{redirect:function(t){c(this)},logout:function(t){l(this)}},mounted:function(){this.redirect()}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"navbar hidden",attrs:{id:"navbar"}},[r("div",{staticClass:"route-container"},[r("router-link",{staticClass:"routes",attrs:{to:{name:"MainPage"}}},[t._v("Home")])],1),t._v(" "),r("div",{staticClass:"route-container",attrs:{id:"creators"}},[r("router-link",{staticClass:"routes",attrs:{to:{name:"MyPage"}}},[t._v("MyPage")])],1),t._v(" "),r("div",{staticClass:"route-container",attrs:{id:"Subscriptions"}},[r("router-link",{staticClass:"routes",attrs:{to:{name:"Subscriptions"}}},[t._v("Subscriptions")])],1),t._v(" "),r("button",{staticClass:"btn",attrs:{id:"logout-button"},on:{click:t.logout}},[t._v("Logout")])]),t._v(" "),r("div",{staticClass:"container"},[r("transition",{attrs:{name:"fade"}},[r("router-view")],1)],1)])},staticRenderFns:[]};var m=r("VU/8")(u,v,!1,function(t){r("Hk+A")},null,null).exports,p=r("/ocq"),h={data:function(){return{user:{username:"",isCreator:null},allCreators:[],visibleCreators:[],subscribedTo:[],search:""}},created:function(){this.redirect(),this.getAllCreators()},methods:{findCreator:function(){this.search.length>0?-1==this.allCreators.indexOf(this.search)?this.visibleCreators=[]:(this.visibleCreators=[],this.visibleCreators.push(this.search)):this.refreshCreators()},redirect:function(t){c(this)},getAllCreators:function(t){var e=this,r=this;o().get("/currentUser").then(function(t){e.user=t.data,o().get("/api/creators").then(function(t){r.allCreators=e.shuffle(t.data);var n=e.allCreators.indexOf(e.user.username);-1!=n&&e.allCreators.splice(n,1),e.visibleCreators=e.allCreators.slice(0).splice(0,10),o().get("/api/"+e.user.username+"/creators").then(function(t){e.subscribedTo=t.data}).catch(function(t){t.response&&console.error(t.response.data)})}).catch(function(t){t.response&&console.error(t.response.data)})}).catch(function(t){console.error("Not logged in")})},getCurrentUser:function(t){var e=this;o().get("/currentUser").then(function(t){e.user=t.data}).catch(function(t){console.error("Not logged in")})},refreshCreators:function(){this.visibleCreators=this.shuffle(this.allCreators).slice(0).splice(0,10)},shuffle:function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=[t[r],t[e]];t[e]=n[0],t[r]=n[1]}return t}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Welcome "),r("span",{attrs:{id:"user"}},[t._v(t._s(t.user.username))]),t._v(" !")]),t._v(" "),r("form",{attrs:{id:"search-form"}},[r("h2",{staticClass:"form-heading-content"},[t._v("Find Creators")]),t._v(" "),r("div",[r("form",{on:{submit:function(e){return e.preventDefault(),t.findCreator(e)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-field",attrs:{type:"input",placeholder:"Find a Creator"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),r("input",{staticClass:"btn content-button",attrs:{id:"search-button",type:"submit",value:"Find"}})])])]),t._v(" "),r("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),r("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.visibleCreators,function(e){return t.visibleCreators.length>0?r("tr",{key:e,staticClass:"creator table-row"},[r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(e))])]),t._v(" "),r("td",[r("router-link",{staticClass:"btn visit-page",attrs:{to:{name:"ViewCreator",params:{creator:e}}}},[t._v("Visit Page")])],1),t._v(" "),-1==t.subscribedTo.indexOf(e)?r("td",{staticClass:"not-subscribed"},[r("div",{staticClass:"table-value"},[t._v("✘")])]):r("td",{staticClass:"subscribed"},[r("div",{staticClass:"table-value"},[t._v("✔")])])]):r("tr",[t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("Creator Name")]),this._v(" "),e("td",[this._v("Creator Page")]),this._v(" "),e("td",[this._v("Subscribed")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])}]};var _=r("VU/8")(h,f,!1,function(t){r("Q/iu")},null,null).exports,g=function(t,e,r){o().post("/login/",{username:e,password:r}).then(function(t){document.getElementById("navbar").classList.remove("hidden"),window.location.href="/"}).catch(function(e){e.response&&(t.message=e.response.data)})},b={name:"Login",data:function(){return{username:"",password:"",message:""}},methods:{redirect:function(t){d(this)},login:function(t){g(this,this.username,this.password)}},mounted:function(){this.redirect()}},C={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-wrapper border border-light"},[r("form",{staticClass:"form-content",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("h2",{staticClass:"form-heading"},[t._v("Login")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),r("p",[t._v("Need an account? "),r("router-link",{attrs:{to:{name:"Register"}}},[t._v("Register!")])],1),t._v(" "),r("div",{attrs:{id:"error"}},[t._v(t._s(t.message))]),t._v(" "),r("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Login")])])])},staticRenderFns:[]};var w=r("VU/8")(b,C,!1,function(t){r("y/6s")},null,null).exports,y=function(t,e,r,n){o().post("/register/",{email:e,username:r,password:n}).then(function(t){"200"==t.status&&(window.location.href="/login")}).catch(function(e){e.response&&(t.message=e.response.data)})},E={name:"Register",data:function(){return{email:"",username:"",password:"",repassword:"",message:""}},methods:{redirect:function(t){d(this)},register:function(t){this.password===this.repassword?y(this,this.email,this.username,this.password):this.message="Passwords do not match!"}},mounted:function(){this.redirect()}},D={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-wrapper border border-light"},[r("form",{staticClass:"form-content",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[r("h2",{staticClass:"form-heading"},[t._v("Register")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email",required:"",autofocus:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"username",placeholder:"Username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.repassword,expression:"repassword"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Re-Type Password",required:""},domProps:{value:t.repassword},on:{input:function(e){e.target.composing||(t.repassword=e.target.value)}}}),t._v(" "),r("p",[t._v("Have an account? "),r("router-link",{attrs:{to:{name:"Login"}}},[t._v("Login!")])],1),t._v(" "),r("div",{attrs:{id:"error"}},[t._v(t._s(t.message))]),t._v(" "),r("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Register")])])])},staticRenderFns:[]};var V=r("VU/8")(E,D,!1,function(t){r("EPz1")},null,null).exports,M={data:function(){return{videoObjs:[],creator:"",err:""}},created:function(){this.creator=this.$route.params.creator,this.getAllVideos()},methods:{getAllVideos:function(t){var e=this;o().get("/api/"+this.$route.params.creator+"/videos").then(function(t){e.videoObjs=t.data.reverse()}).catch(function(t){t.response&&(e.err=t.response.data,document.getElementById("page-container").classList.add("hidden"))})},convertDate:function(t){var e=new Date,r=new Date(t);return r.getDate()===e.getDate()&&r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()?"Today":(e=r.toDateString()).slice(e.indexOf(" "),e.length)},loadVideo:function(t){document.createElement("div");document.getElementById("video-container").innerHTML='\n                <video width=1024 height=576 class="video-js vjs-default-skin video" controls autoplay>\n                <source\n                    src="'+t.url+'"\n                </video>\n                <div id="about_video"> \n                    <div id="current_title">'+t.title+'</div>\n                    <div id="current_upDate">'+this.convertDate(t.uploadDate)+'</div>\n                    <br>\n                    <div id="current_desc">'+t.description+"</div>\n                </div>\n            "},subscribe:function(){o().get("/api/payment/subscribe/"+this.creator).then(function(t){window.location.href=t.data}).catch(function(t){t.response&&console.error(t.response.data)})}}},N={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{attrs:{id:"error"}},[t.err.length>0?r("div",[r("div",[t._v(t._s(t.err))]),t._v(" "),r("button",{staticClass:"btn content-button",on:{click:t.subscribe}},[t._v("Subscribe($3.00)")])]):t._e()]),t._v(" "),r("div",{attrs:{id:"page-container"}},[r("h1",[r("span",{attrs:{id:"user"}},[t._v(t._s(t.creator))])]),t._v(" "),r("div",{attrs:{id:"video-container"}}),t._v(" "),r("h1",[t._v("Videos")]),t._v(" "),r("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),0==t.videoObjs.length?r("transition-group",{tag:"tbody",attrs:{name:"fade"}},[t._m(1)]):r("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.videoObjs,function(e){return r("tr",{key:e.url,staticClass:"videos table-row"},[r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(e.title))])]),t._v(" "),r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(t.convertDate(e.uploadDate)))])]),t._v(" "),r("td",[r("button",{staticClass:"btn content-button",on:{click:function(r){t.loadVideo(e)}}},[t._v("▶")])])])}))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("Video Title")]),this._v(" "),e("td",[this._v("Date")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[e("div",{staticClass:"table-value"},[this._v("None")])]),this._v(" "),e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])])}]};var P=r("VU/8")(M,N,!1,function(t){r("noyZ")},null,null).exports,U={data:function(){return{user:{username:"",isCreator:null},videoObjs:[]}},mounted:function(){this.getCurrentUser()},methods:{pay:function(){o().get("/api/payment/makeCreator/").then(function(t){window.location.href=t.data}).catch(function(t){t.response&&console.error(t.response.data)})},getCurrentUser:function(){var t=this;o().get("/currentUser").then(function(e){t.user=e.data,t.getAllVideos()}).catch(function(t){t.response&&console.error(t.response.data)})},getAllVideos:function(){var t=this;o().get("/api/"+this.user.username+"/videos").then(function(e){t.videoObjs=e.data.reverse()}).catch(function(t){t.response&&(document.getElementById("error").innerHTML="\n                    "+t.response.data+'\n                    <router-link><button class="btn content-button">Subscribe</div>\n                    ',document.getElementById("page-container").classList.add("hidden"))})},convertDate:function(t){var e=new Date,r=new Date(t);return r.getDate()===e.getDate()&&r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()?"Today":(e=r.toDateString()).slice(e.indexOf(" "),e.length)},loadVideo:function(t){document.createElement("div");document.getElementById("video-container").innerHTML='\n                <video width=1024 height=576 class="video-js vjs-default-skin video" controls autoplay>\n                <source\n                    src="'+t.url+'"\n                </video>\n                <div id="about_video"> \n                    <div id="current_title">'+t.title+'</div>\n                    <div id="current_upDate">'+this.convertDate(t.uploadDate)+'</div>\n                    <br>\n                    <div id="current_desc">'+t.description+"</div>\n                </div>\n            "}}},k={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.user.isCreator?r("div",[r("h1",[t._v("My Page")]),t._v(" "),r("router-link",{attrs:{to:{name:"Upload",params:{creator:t.user.username}}}},[r("button",{staticClass:"btn content-button"},[t._v("Upload Video")])]),t._v(" "),r("div",{attrs:{id:"error"}}),t._v(" "),r("div",{attrs:{id:"page-container"}},[r("div",{attrs:{id:"video-container"}}),t._v(" "),r("h1",[t._v("Videos")]),t._v(" "),r("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),0==t.videoObjs.length?r("transition-group",{tag:"tbody",attrs:{name:"fade"}},[t._m(1)]):r("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.videoObjs,function(e){return r("tr",{key:e.url,staticClass:"videos table-row"},[r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(e.title))])]),t._v(" "),r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(t.convertDate(e.uploadDate)))])]),t._v(" "),r("td",[r("button",{staticClass:"btn content-button",on:{click:function(r){t.loadVideo(e)}}},[t._v("Play")])])])}))])])],1):r("div",[r("h1",[t._v("You are currently not a Creator, click below to pay the Creator fees !")]),t._v(" "),r("button",{staticClass:"btn content-button",on:{click:t.pay}},[t._v("Make Creator ($25.00)")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("Video Title")]),this._v(" "),e("td",[this._v("Date")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[e("div",{staticClass:"table-value"},[this._v("None")])]),this._v(" "),e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])])}]};var $=r("VU/8")(U,k,!1,function(t){r("4KRv")},null,null).exports,L={data:function(){return{creators:[]}},created:function(){this.getCreators()},methods:{getCreators:function(){var t=this;o().get("/currentUser").then(function(e){var r=e.data.username;o().get("/api/"+r+"/creators").then(function(e){t.creators=e.data}).catch(function(t){t.response&&console.error(t.response.data)})})}}},x={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),0==t.creators.length?r("transition-group",{tag:"tbody",attrs:{name:"fade"}},[t._m(1)]):r("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.creators,function(e){return r("tr",{key:e,staticClass:"creator table-row"},[r("td",[r("div",{staticClass:"table-value"},[t._v(t._s(e))])]),t._v(" "),r("td",[r("router-link",{staticClass:"btn visit-page",attrs:{to:{name:"ViewCreator",params:{creator:e}}}},[t._v("➤")])],1)])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("Creator Name")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[e("div",{staticClass:"table-value"},[this._v("None")])]),this._v(" "),e("td",[e("div",{staticClass:"table-value"},[this._v("None")])])])}]};var B=r("VU/8")(L,x,!1,function(t){r("Kicj")},null,null).exports,I={data:function(){return{creator:"",title:"",description:"",progressValue:0}},created:function(){this.creator=this.$route.params.creator},methods:{updateBar:function(t,e){var r=document.getElementById("bar");if(t<e){var n=t/e*100;r.style.width=n+"%",r.innerHTML=1*n+"%"}else r.style.width="100%",r.innerHTML="Sending to server..."},upload:function(t){var e=this,r=new FormData,n=document.getElementById("video-file").files[0];r.append("title",this.title),r.append("description",this.description),r.append("file",n),n.size>10485760?document.getElementById("error").innerHTML="File is larger than 10MB":(document.getElementById("progress").classList.remove("hidden"),document.getElementById("submit-video").disabled=!0,o().post("/api/"+this.creator+"/uploads",r,{onUploadProgress:function(t){t.lengthComputable&&e.updateBar(t.loaded,t.total)}}).then(function(t){document.getElementById("bar").innerHTML="Done",document.getElementById("submit-video").disabled=!1,document.getElementById("upload-form").reset()}).catch(function(t){t.response&&(document.getElementById("error").innerHTML=t.response.data)}))}}},R={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"upload-wrapper border border-light"},[r("form",{staticClass:"form-upload",attrs:{id:"upload-form",method:"post",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.upload(e)}}},[r("div",{staticClass:"form-upload-heading"},[t._v("Upload")]),t._v(" "),r("span",[t._v("*Can only upload videos with less than 10MB for now")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",id:"video-title",name:"title",placeholder:"Video Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),r("input",{staticClass:"form-control",attrs:{type:"file",id:"video-file",name:"file",accept:"video/*"}}),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"video-description",rows:"3",placeholder:"Video Description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),r("input",{staticClass:"btn content-button",attrs:{type:"submit",id:"submit-video",value:"Upload"}}),t._v(" "),t._m(0),t._v(" "),r("div",{attrs:{id:"error"}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hidden",attrs:{id:"progress"}},[e("div",{attrs:{id:"bar"}})])}]};var T=r("VU/8")(I,R,!1,function(t){r("MaJi")},null,null).exports;n.a.use(p.a);var F=new p.a({routes:[{path:"/",name:"MainPage",component:_},{path:"/login",name:"Login",component:w},{path:"/register",name:"Register",component:V},{path:"/creator/:creator",name:"ViewCreator",component:P},{path:"/mypage",name:"MyPage",component:$},{path:"/subsciptions",name:"Subscriptions",component:B},{path:"/upload",name:"Upload",component:T}],mode:"history",base:"/"});n.a.config.productionTip=!1,new n.a({el:"#app",router:F,components:{App:m},template:"<App/>"})},"Q/iu":function(t,e){},noyZ:function(t,e){},"y/6s":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4d10a16a081ea209c781.js.map